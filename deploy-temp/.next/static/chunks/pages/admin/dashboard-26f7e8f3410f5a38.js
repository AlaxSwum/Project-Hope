(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return t(3898)}])},3898:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return B}});var r=t(5893),a=t(9008),l=t.n(a),n=t(7294),i=t(1163),o=t(4891);let d={getAllBranches:async()=>{try{let{data:e,error:s}=await o.pR.from("pharmacy_branches").select("*").eq("is_active",!0).order("branch_name");if(s)return{data:null,error:s};return{data:await Promise.all((e||[]).map(async e=>{let{count:s}=await o.pR.from("user_branch_assignments").select("*",{count:"exact",head:!0}).eq("branch_id",e.id).eq("is_active",!0);return{...e,staff_count:s||0}})),error:s}}catch(e){return console.error("Error fetching branches:",e),{data:null,error:{message:"Failed to fetch branches"}}}},createBranch:async e=>{try{let s=await o.ON.getCurrentUser();if(!s)return{data:null,error:{message:"User not authenticated"}};let{data:t,error:r}=await o.pR.from("pharmacy_branches").insert([{...e,created_by:s.id,is_active:!0}]).select().single();return console.log("Branch created successfully:",t),{data:t,error:r}}catch(e){return console.error("Error creating branch:",e),{data:null,error:{message:"Failed to create branch"}}}},updateBranch:async(e,s)=>{try{let{data:t,error:r}=await o.pR.from("pharmacy_branches").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select().single();return console.log("Branch updated successfully:",t),{data:t,error:r}}catch(e){return console.error("Error updating branch:",e),{data:null,error:{message:"Failed to update branch"}}}},getBranchStaff:async e=>{try{let{data:s,error:t}=await o.pR.from("branch_staff_assignments").select("\n          *,\n          user:users!user_id(\n            id,\n            first_name,\n            last_name,\n            email,\n            role,\n            position,\n            phone\n          )\n        ").eq("branch_id",e).order("assignment_date",{ascending:!1});return{data:s,error:t}}catch(e){return console.error("Error fetching branch staff:",e),{data:null,error:{message:"Failed to fetch branch staff"}}}}},c=e=>{let{onSearch:s}=e,[t,a]=(0,n.useState)("");return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.trim()&&s(t.trim())},className:"flex space-x-2",children:[(0,r.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),placeholder:"Search for an address...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700",children:"Search"})]})};var x=e=>{let{initialLat:s=51.505,initialLng:t=-.09,initialRadius:a=50,onLocationSelect:l,onRadiusChange:i,showRadius:o=!0,height:d="400px",className:x=""}=e,m=(0,n.useRef)(null),[h,u]=(0,n.useState)(null),[g,p]=(0,n.useState)(null),[f,b]=(0,n.useState)(null),[y,j]=(0,n.useState)(null),[v,N]=(0,n.useState)(!1),[w,k]=(0,n.useState)(!0),[_,C]=(0,n.useState)(null),[L,M]=(0,n.useState)(a);return((0,n.useEffect)(()=>{(()=>{if(window.google&&window.google.maps){N(!0),k(!1);return}if(document.querySelector('script[src*="maps.googleapis.com"]')){let e=setInterval(()=>{window.google&&window.google.maps&&(clearInterval(e),N(!0),k(!1))},100);return}let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBQYWJSq1VWYFNxWYw5ZVcCwJeZyXAMImw","&libraries=geometry"),e.async=!0,e.defer=!0,e.onload=()=>{N(!0),k(!1)},e.onerror=()=>{C("Failed to load Google Maps API"),k(!1)},document.head.appendChild(e)})()},[]),(0,n.useEffect)(()=>{if(v&&m.current)try{let e=new window.google.maps.Map(m.current,{center:{lat:s,lng:t},zoom:15,mapTypeId:window.google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),r=new window.google.maps.Geocoder;u(e),j(r);let a=new window.google.maps.Marker({position:{lat:s,lng:t},map:e,draggable:!0,title:"Branch Location"});if(p(a),o){let r=new window.google.maps.Circle({map:e,center:{lat:s,lng:t},radius:L,fillColor:"#4F46E5",fillOpacity:.1,strokeColor:"#4F46E5",strokeOpacity:.8,strokeWeight:2,editable:!0});b(r),window.google.maps.event.addListener(r,"radius_changed",()=>{let e=Math.round(r.getRadius());M(e),null==i||i(e)})}window.google.maps.event.addListener(e,"click",e=>{let s=e.latLng.lat(),t=e.latLng.lng();a.setPosition(e.latLng),initialCircle&&initialCircle.setCenter(e.latLng),r.geocode({location:e.latLng},(e,r)=>{let a="OK"===r&&e[0]?e[0].formatted_address:void 0;l(s,t,a)})}),window.google.maps.event.addListener(a,"dragend",e=>{let s=e.latLng.lat(),t=e.latLng.lng();initialCircle&&initialCircle.setCenter(e.latLng),r.geocode({location:e.latLng},(e,r)=>{let a="OK"===r&&e[0]?e[0].formatted_address:void 0;l(s,t,a)})})}catch(e){C("Failed to initialize Google Maps"),console.error("Google Maps initialization error:",e)}},[v,s,t,o]),_)?(0,r.jsx)("div",{className:"".concat(x," border-2 border-dashed border-gray-300 rounded-lg p-8"),style:{height:d},children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-500 text-lg mb-2",children:"⚠️ Map Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:_}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Please check your Google Maps API key configuration."})]})}):w?(0,r.jsx)("div",{className:"".concat(x," border-2 border-dashed border-gray-300 rounded-lg p-8"),style:{height:d},children:(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading Google Maps..."})]})})}):(0,r.jsxs)("div",{className:x,children:[(0,r.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{if(!navigator.geolocation){alert("Geolocation is not supported by this browser.");return}navigator.geolocation.getCurrentPosition(e=>{let s=e.coords.latitude,t=e.coords.longitude,r=new window.google.maps.LatLng(s,t);h.setCenter(r),h.setZoom(15),g.setPosition(r),f&&f.setCenter(r),y.geocode({location:r},(e,r)=>{l(s,t,"OK"===r&&e[0]?e[0].formatted_address:void 0)})},e=>{alert("Error getting current location: "+e.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsx)("span",{children:"Use Current Location"})]}),o&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Radius:"}),(0,r.jsxs)("span",{className:"font-medium text-blue-600",children:[L,"m"]})]})]}),(0,r.jsx)(c,{onSearch:e=>{y&&y.geocode({address:e},(e,s)=>{if("OK"===s&&e[0]){let s=e[0].geometry.location,t=s.lat(),r=s.lng();h.setCenter(s),h.setZoom(15),g.setPosition(s),f&&f.setCenter(s),l(t,r,e[0].formatted_address)}else alert("Address not found. Please try a different search term.")})}})]}),(0,r.jsx)("div",{ref:m,className:"w-full border border-gray-300 rounded-lg",style:{height:d}}),(0,r.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:[(0,r.jsx)("p",{children:"• Click anywhere on the map to set the location"}),(0,r.jsx)("p",{children:"• Drag the marker to fine-tune the position"}),o&&(0,r.jsx)("p",{children:"• Drag the circle edge to adjust the allowed radius"})]})]})},m=e=>{let{branch:s,location:t,onSave:a,onClose:l}=e,[i,d]=(0,n.useState)({latitude:0,longitude:0,address:"",radius_meters:50}),[c,m]=(0,n.useState)(!1),[h,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t?(d({latitude:Number(t.latitude)||0,longitude:Number(t.longitude)||0,address:t.address||"",radius_meters:Number(t.radius_meters)||50}),u(!!t.latitude&&!!t.longitude)):(d({latitude:51.505,longitude:-.09,address:"",radius_meters:50}),u(!1))},[t]);let g=async()=>{if(!h||!i.latitude||!i.longitude){alert("Please select a location on the map");return}m(!0);try{let e={branch_id:s.id,latitude:i.latitude,longitude:i.longitude,address:i.address.trim()||void 0,radius_meters:i.radius_meters||50};(null==t?void 0:t.id)?await o.bR.updateBranchLocation(t.id,e):await o.bR.createBranchLocation(e),alert("Location saved successfully!"),a(s.id),l()}catch(e){alert("Error saving location: "+e.message)}finally{m(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsxs)("div",{className:"relative top-4 mx-auto p-6 border w-full max-w-6xl shadow-lg rounded-lg bg-white",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Set Location for ",s.name||s.branch_name||"Branch"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Use the interactive map below to set the exact location and radius for employee clock-in verification."})]}),h&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsxs)("svg",{className:"w-5 h-5 text-green-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Location Selected"}),(0,r.jsxs)("div",{className:"text-sm text-green-700 mt-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Coordinates:"})," ",i.latitude.toFixed(6),", ",i.longitude.toFixed(6)]}),i.address&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Address:"})," ",i.address]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Allowed Radius:"})," ",i.radius_meters," meters"]})]})]})]})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(x,{initialLat:i.latitude,initialLng:i.longitude,initialRadius:i.radius_meters,onLocationSelect:(e,s,t)=>{d(r=>({...r,latitude:e,longitude:s,address:t||r.address})),u(!0)},onRadiusChange:e=>{d(s=>({...s,radius_meters:e}))},showRadius:!0,height:"500px",className:"w-full"})}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Additional Settings"}),(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),(0,r.jsx)("input",{type:"text",value:i.address,onChange:e=>d(s=>({...s,address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter or edit the address for this location"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This address will be shown to employees for reference"})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t",children:[(0,r.jsx)("button",{onClick:l,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:g,disabled:c||!i.latitude||!i.longitude,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center space-x-2",children:[c&&(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,r.jsx)("span",{children:c?"Saving...":"Save Location"})]})]})]})})},h=e=>{let{branch:s,onManageStaff:t,onViewDetails:a,onTimeManagement:l,onSetLocation:n,activeStaffCount:i,onBreakCount:o,totalStaffCount:d}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s.branch_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[s.branch_code," • ",s.city]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,r.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Active"}),(0,r.jsx)("div",{className:"text-xl font-bold text-green-700",children:i})]}),(0,r.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3 text-center",children:[(0,r.jsx)("div",{className:"text-sm text-orange-600 font-medium",children:"On Break"}),(0,r.jsx)("div",{className:"text-xl font-bold text-orange-700",children:o})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,r.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Total Staff"}),(0,r.jsx)("div",{className:"text-xl font-bold text-blue-700",children:d})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Staff Management"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:t,className:"flex-1 bg-purple-50 hover:bg-purple-100 text-purple-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Manage Staff"}),(0,r.jsx)("button",{onClick:a,className:"flex-1 bg-blue-50 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Details"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Time Management"}),(0,r.jsxs)("button",{onClick:l,className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:"View Time Entries"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Location Settings"}),(0,r.jsxs)("button",{onClick:n,className:"w-full bg-green-50 hover:bg-green-100 text-green-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2",children:[(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsx)("span",{children:"Set Location"})]})]})]})]}),(0,r.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:s.branch_type})})]})},u=e=>{let{branch:s,staff:t,onClose:a}=e,[l,i]=(0,n.useState)([]),[d,c]=(0,n.useState)([]),[x,m]=(0,n.useState)([]),[h,u]=(0,n.useState)(!0),[g,p]=(0,n.useState)(new Date().toISOString().split("T")[0]),[f,b]=(0,n.useState)(!1),[y,j]=(0,n.useState)(null),[v,N]=(0,n.useState)("");(0,n.useEffect)(()=>{w()},[s.id,g]);let w=async()=>{u(!0);try{console.log("Loading time entries for branch:",s.id,"date:",g);let{data:e,error:t}=await o.bR.getBranchTimeEntries(s.id,g);if(!e||0===e.length){console.log("No entries found for date, trying all entries for branch...");let r=await o.bR.getBranchTimeEntries(s.id,"");e=r.data,t=r.error,console.log("All entries for branch:",(null==e?void 0:e.length)||0)}if(t)throw console.error("Error from getBranchTimeEntries:",t),t;console.log("Time entries loaded:",(null==e?void 0:e.length)||0,"entries"),i(e||[]);let r=(e||[]).filter(e=>{var s;return e.clock_in_time&&!e.clock_out_time&&!(null===(s=e.break_entries)||void 0===s?void 0:s.some(e=>e.clock_in_time&&!e.clock_out_time))}),a=(e||[]).filter(e=>{var s;return e.clock_in_time&&!e.clock_out_time&&(null===(s=e.break_entries)||void 0===s?void 0:s.some(e=>e.clock_in_time&&!e.clock_out_time))});console.log("Active staff:",r.length,"On break:",a.length),c(r),m(a)}catch(e){console.error("Error loading time entries:",e),i([])}finally{u(!1)}},k=async e=>{j(e),b(!0)},_=async(e,s)=>{try{let{error:e}=await o.bR.endBreak(s.id);if(e)throw e;w()}catch(e){console.error("Error ending break:",e)}},C=async()=>{if(y)try{let{error:e}=await o.bR.startBreak({time_entry_id:y.id,break_type:"regular",notes:v});if(e)throw e;b(!1),N(""),w()}catch(e){console.error("Error starting break:",e)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsxs)("div",{className:"relative top-4 mx-auto p-6 border w-full max-w-6xl shadow-lg rounded-lg bg-white",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Time Management"}),(0,r.jsx)("p",{className:"text-gray-500",children:s.branch_name})]}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-500",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)("div",{className:"col-span-1",children:(0,r.jsx)("input",{type:"date",value:g,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),(0,r.jsxs)("div",{className:"col-span-3 grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Currently Working"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-green-700",children:d.length})]}),(0,r.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-orange-600 font-medium",children:"On Break"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-700",children:x.length})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Total Staff"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:t.length})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clock In"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clock Out"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Break History"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Loading time entries..."})}):0===l.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No time entries found for this date."})}):l.map(e=>{var s,t,a,l;let n=null===(s=e.break_entries)||void 0===s?void 0:s.some(e=>e.clock_in_time&&!e.clock_out_time),i=null===(t=e.break_entries)||void 0===t?void 0:t.find(e=>!e.clock_out_time),o=new Date(e.clock_in_time),d=Math.floor(((e.clock_out_time?new Date(e.clock_out_time):new Date).getTime()-o.getTime())/6e4);return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-blue-700 font-medium",children:[e.user.first_name[0],e.user.last_name[0]]})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.user.first_name," ",e.user.last_name]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.user.role})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.clock_in_time).toLocaleTimeString()}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.clock_in_time).toLocaleDateString()})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.clock_out_time?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.clock_out_time).toLocaleTimeString()}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.clock_out_time).toLocaleDateString()})]}):(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"-"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Math.floor(d/60),"h ",d%60,"m"]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[!e.clock_out_time&&(0,r.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(n?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"),children:n?"On Break":"Working"}),e.clock_out_time&&(0,r.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Completed"})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:((null===(a=e.break_entries)||void 0===a?void 0:a.length)||0)>0?(0,r.jsx)("div",{className:"space-y-2",children:null===(l=e.break_entries)||void 0===l?void 0:l.map(e=>(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-orange-400 rounded-full mt-1.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[new Date(e.clock_in_time).toLocaleTimeString()," -",e.clock_out_time?new Date(e.clock_out_time).toLocaleTimeString():"Ongoing"]}),e.notes&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.notes})]})]},e.id))}):(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"No breaks"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:!e.clock_out_time&&(n?(0,r.jsx)("button",{onClick:()=>_(e,i),className:"text-orange-600 hover:text-orange-900",children:"End Break"}):(0,r.jsx)("button",{onClick:()=>k(e),className:"text-blue-600 hover:text-blue-900",children:"Start Break"}))})]},e.id)})})]})}),f&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Start Break"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Break Note (Optional)"}),(0,r.jsx)("textarea",{value:v,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Add a note about this break..."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{b(!1),N("")},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),(0,r.jsx)("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Start Break"})]})]})]})})]})})},g=t(2947);let p=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function f(e){let{branchId:s,onClose:t,onStaffChanged:a}=e,[l,i]=(0,n.useState)([]),[d,c]=(0,n.useState)(!1),[x,m]=(0,n.useState)([]),[h,u]=(0,n.useState)(null),[f,b]=(0,n.useState)(!1),[y,j]=(0,n.useState)(!0),[v,N]=(0,n.useState)({}),[w,k]=(0,n.useState)(null),[_,C]=(0,n.useState)(""),L=()=>{let e={};return p.forEach(s=>{let t=!["saturday","sunday"].includes(s);e[s]={start:"09:00",end:"17:00",workDay:t}}),e};(0,n.useEffect)(()=>{M()},[s]);let M=async()=>{try{j(!0),console.log("Loading assigned staff for branch:",s);let{data:e,error:t}=await o.OQ.from("branch_staff_assignments").select("\n          *,\n          user:users(*)\n        ").eq("branch_id",s);if(t)throw console.error("Error loading assignments:",t),t;let r=await Promise.all((e||[]).map(async e=>{try{let{data:t}=await o.OQ.from("employee_schedules").select("*").eq("user_id",e.user_id).eq("branch_id",s).single();if(t){let s={monday:{start:t.monday_start||"09:00",end:t.monday_end||"17:00",workDay:!!(t.monday_start&&t.monday_end)},tuesday:{start:t.tuesday_start||"09:00",end:t.tuesday_end||"17:00",workDay:!!(t.tuesday_start&&t.tuesday_end)},wednesday:{start:t.wednesday_start||"09:00",end:t.wednesday_end||"17:00",workDay:!!(t.wednesday_start&&t.wednesday_end)},thursday:{start:t.thursday_start||"09:00",end:t.thursday_end||"17:00",workDay:!!(t.thursday_start&&t.thursday_end)},friday:{start:t.friday_start||"09:00",end:t.friday_end||"17:00",workDay:!!(t.friday_start&&t.friday_end)},saturday:{start:t.saturday_start||"09:00",end:t.saturday_end||"17:00",workDay:!!(t.saturday_start&&t.saturday_end)},sunday:{start:t.sunday_start||"09:00",end:t.sunday_end||"17:00",workDay:!!(t.sunday_start&&t.sunday_end)}};return{...e,work_schedule:s}}return e}catch(s){return console.warn("No schedule found for user ".concat(e.user_id,":"),s),e}}));console.log("Assignments with schedules loaded:",r),i(r)}catch(e){console.error("Error loading assigned staff:",e),g.Am.error("Failed to load assigned staff: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{j(!1)}},S=async()=>{try{let e=(l||[]).map(e=>e.user_id),s=o.OQ.from("users").select("*");e.length>0&&(s=s.not("id","in","(".concat(e.join(","),")")));let{data:t,error:r}=await s;if(r)throw r;m(t||[])}catch(e){console.error("Error loading available users:",e),g.Am.error("Failed to load available users")}},B=async()=>{await S(),c(!0)},A=async e=>{try{console.log("Assigning staff:",e,"to branch:",s);let{data:t,error:r}=await o.OQ.from("branch_staff_assignments").insert({user_id:e,branch_id:s,is_primary_branch:!1,position:"staff",pay_rate:12}).select();if(r)throw console.error("Assignment error:",r),r;let l=await o.OQ.from("employee_schedules").insert([{user_id:e,branch_id:s,monday_start:"09:00",monday_end:"17:00",tuesday_start:"09:00",tuesday_end:"17:00",wednesday_start:"09:00",wednesday_end:"17:00",thursday_start:"09:00",thursday_end:"17:00",friday_start:"09:00",friday_end:"17:00",saturday_start:null,saturday_end:null,sunday_start:null,sunday_end:null,is_active:!0}]).select();l.error&&(console.error("Schedule creation error:",l.error),console.warn("Staff assigned but default schedule creation failed")),console.log("Assignment result:",t),g.Am.success("Staff assigned successfully with default schedule"),await M(),null==a||a(),c(!1)}catch(e){console.error("Error assigning staff:",e),g.Am.error("Failed to assign staff: ".concat(e instanceof Error?e.message:"Unknown error"))}},D=async e=>{try{let{error:s}=await o.OQ.from("branch_staff_assignments").delete().eq("id",e);if(s)throw s;g.Am.success("Staff removed successfully"),await M(),null==a||a()}catch(e){console.error("Error removing staff:",e),g.Am.error("Failed to remove staff")}},W=async(e,t)=>{u(t);try{let{data:e}=await o.OQ.from("employee_schedules").select("*").eq("user_id",t).eq("branch_id",s).single();if(e){let s={monday:{start:e.monday_start||"09:00",end:e.monday_end||"17:00",workDay:!!(e.monday_start&&e.monday_end)},tuesday:{start:e.tuesday_start||"09:00",end:e.tuesday_end||"17:00",workDay:!!(e.tuesday_start&&e.tuesday_end)},wednesday:{start:e.wednesday_start||"09:00",end:e.wednesday_end||"17:00",workDay:!!(e.wednesday_start&&e.wednesday_end)},thursday:{start:e.thursday_start||"09:00",end:e.thursday_end||"17:00",workDay:!!(e.thursday_start&&e.thursday_end)},friday:{start:e.friday_start||"09:00",end:e.friday_end||"17:00",workDay:!!(e.friday_start&&e.friday_end)},saturday:{start:e.saturday_start||"09:00",end:e.saturday_end||"17:00",workDay:!!(e.saturday_start&&e.saturday_end)},sunday:{start:e.sunday_start||"09:00",end:e.sunday_end||"17:00",workDay:!!(e.sunday_start&&e.sunday_end)}};N(s)}else N(L())}catch(e){console.error("Error loading schedule:",e),N(L())}b(!0)},H=async()=>{if(h)try{var e,t,r,a,l,n,i,d,c,x,m,u,p,f;let y;console.log("Saving schedule for user:",h,"branch:",s),console.log("Schedule data:",v);let j={user_id:h,branch_id:s,monday_start:(null===(e=v.monday)||void 0===e?void 0:e.workDay)?v.monday.start:null,monday_end:(null===(t=v.monday)||void 0===t?void 0:t.workDay)?v.monday.end:null,tuesday_start:(null===(r=v.tuesday)||void 0===r?void 0:r.workDay)?v.tuesday.start:null,tuesday_end:(null===(a=v.tuesday)||void 0===a?void 0:a.workDay)?v.tuesday.end:null,wednesday_start:(null===(l=v.wednesday)||void 0===l?void 0:l.workDay)?v.wednesday.start:null,wednesday_end:(null===(n=v.wednesday)||void 0===n?void 0:n.workDay)?v.wednesday.end:null,thursday_start:(null===(i=v.thursday)||void 0===i?void 0:i.workDay)?v.thursday.start:null,thursday_end:(null===(d=v.thursday)||void 0===d?void 0:d.workDay)?v.thursday.end:null,friday_start:(null===(c=v.friday)||void 0===c?void 0:c.workDay)?v.friday.start:null,friday_end:(null===(x=v.friday)||void 0===x?void 0:x.workDay)?v.friday.end:null,saturday_start:(null===(m=v.saturday)||void 0===m?void 0:m.workDay)?v.saturday.start:null,saturday_end:(null===(u=v.saturday)||void 0===u?void 0:u.workDay)?v.saturday.end:null,sunday_start:(null===(p=v.sunday)||void 0===p?void 0:p.workDay)?v.sunday.start:null,sunday_end:(null===(f=v.sunday)||void 0===f?void 0:f.workDay)?v.sunday.end:null,is_active:!0},{data:N,error:w}=await o.OQ.from("employee_schedules").select("id").eq("user_id",h).eq("branch_id",s).single();if((y=N&&!w?await o.OQ.from("employee_schedules").update(j).eq("id",N.id).select():await o.OQ.from("employee_schedules").insert([j]).select()).error)throw console.error("Schedule save error:",y.error),y.error;console.log("Schedule save result:",y.data),g.Am.success("Schedule updated successfully"),await M(),b(!1)}catch(e){console.error("Error updating schedule:",e),g.Am.error("Failed to update schedule: ".concat(e instanceof Error?e.message:"Unknown error"))}},z=(e,s)=>{k(e),C((null==s?void 0:s.toString())||"12.00")},E=async e=>{try{let t=parseFloat(_);if(isNaN(t)||t<0){g.Am.error("Please enter a valid pay rate");return}let{error:r}=await o.OQ.from("branch_staff_assignments").update({pay_rate:t}).eq("id",e);if(r){var s;r instanceof Error&&(null===(s=r.message)||void 0===s?void 0:s.includes('column "pay_rate" of relation "branch_staff_assignments" does not exist'))?(g.Am.error("Pay rate feature requires database update. Please contact administrator to add pay_rate column."),console.log("Run this SQL in Supabase: ALTER TABLE branch_staff_assignments ADD COLUMN pay_rate DECIMAL(10, 2) DEFAULT 12.00;")):(console.error("Database error:",r),g.Am.error("Failed to update pay rate: ".concat(r instanceof Error?r.message:"Unknown error")));return}g.Am.success("Pay rate updated successfully"),k(null),C(""),M(),null==a||a()}catch(e){console.error("Error updating pay rate:",e),g.Am.error("Failed to update pay rate")}},P=()=>{k(null),C("")},F=e=>{if(!e)return(0,r.jsx)("span",{className:"text-sm text-gray-500 italic",children:"No schedule set"});let s=new Date().toLocaleDateString("en",{weekday:"long"}).toLowerCase(),t=e[s],a=Object.keys(e).filter(s=>{var t;return null===(t=e[s])||void 0===t?void 0:t.workDay}).length;return(null==t?void 0:t.workDay)?(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 capitalize",children:["Today (",s,")"]}),(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:[t.start," - ",t.end]})]}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[a," work days per week"]})]}):(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 capitalize",children:["Today (",s,")"]}),(0,r.jsx)("span",{className:"text-gray-500",children:"Day Off"})]}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[a," work days per week"]})]})},V=e=>{var s,t;return"".concat((null===(s=e.first_name)||void 0===s?void 0:s.charAt(0))||"").concat((null===(t=e.last_name)||void 0===t?void 0:t.charAt(0))||"").toUpperCase()},O=e=>{switch(null==e?void 0:e.toLowerCase()){case"administrator":return"bg-purple-100 text-purple-800";case"manager":return"bg-orange-100 text-orange-800";case"pharmacist":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Manage Staff"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Assign staff members and manage their schedules"})]}),(0,r.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("button",{onClick:B,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Staff Member"]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-900",children:["Assigned Staff (",l.length,")"]})}),y?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading staff..."})]}):0===l.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No staff assigned"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first staff member."})]}):(0,r.jsx)("div",{className:"grid gap-4",children:l.map(e=>(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsxs)("h5",{className:"text-lg font-semibold text-gray-900 truncate",children:[e.user.first_name," ",e.user.last_name]}),(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(O(e.user.role)),children:e.user.role})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.user.email}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["Position: ",e.position||"Staff"," • Assigned: ",new Date(e.assignment_date).toLocaleDateString()]}),(0,r.jsx)("div",{className:"bg-green-50 rounded-lg p-3 mb-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("h6",{className:"text-sm font-medium text-gray-700",children:"Hourly Rate"})]}),w===e.id?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\xa3"}),(0,r.jsx)("input",{type:"number",value:_,onChange:e=>C(e.target.value),step:"0.01",min:"0",className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"/hr"}),(0,r.jsx)("button",{onClick:()=>E(e.id),className:"text-green-600 hover:text-green-800 text-xs font-medium",children:"Save"}),(0,r.jsx)("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 text-xs",children:"Cancel"})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"font-semibold text-green-700",children:["\xa3",(e.pay_rate||12).toFixed(2),"/hr"]}),(0,r.jsx)("button",{onClick:()=>z(e.id,e.pay_rate||12),className:"text-xs text-green-600 hover:text-green-800 font-medium",children:"Edit"})]})]})}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h6",{className:"text-sm font-medium text-gray-700",children:"Current Schedule"}),(0,r.jsx)("button",{onClick:()=>W(e.id,e.user_id),className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Edit Schedule"})]}),F(e.work_schedule)]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>W(e.id,e.user_id),className:"px-3 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium",children:"Set Schedule"}),(0,r.jsx)("button",{onClick:()=>D(e.id),className:"px-3 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors text-sm font-medium",children:"Remove"})]})]})},e.id))})]}),d&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl w-96 max-h-[80vh] overflow-y-auto",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Add New Staff Member"}),(0,r.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:0===x.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No available users to assign"}):x.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center text-white font-medium text-xs",children:V(e)}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]}),(0,r.jsx)("button",{onClick:()=>A(e.id),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Assign"})]},e.id))}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})})]})}),f&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl w-[600px] max-h-[80vh] overflow-y-auto",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Set Work Schedule"}),(0,r.jsx)("div",{className:"space-y-4",children:p.map(e=>{var s,t,a,l,n;return(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"workday-".concat(e),checked:(null===(s=v[e])||void 0===s?void 0:s.workDay)||!1,onChange:s=>N(t=>{var r,a;return{...t,[e]:{...t[e],workDay:s.target.checked,start:(null===(r=t[e])||void 0===r?void 0:r.start)||"09:00",end:(null===(a=t[e])||void 0===a?void 0:a.end)||"17:00"}}}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"workday-".concat(e),className:"w-24 capitalize font-medium text-gray-700 cursor-pointer",children:e})]}),(null===(t=v[e])||void 0===t?void 0:t.workDay)?(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Work Day"}):(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Day Off"})]}),(null===(a=v[e])||void 0===a?void 0:a.workDay)&&(0,r.jsxs)("div",{className:"flex items-center space-x-4 ml-7",children:[(0,r.jsx)("input",{type:"time",value:(null===(l=v[e])||void 0===l?void 0:l.start)||"09:00",onChange:s=>N(t=>({...t,[e]:{...t[e],start:s.target.value}})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,r.jsx)("span",{className:"text-gray-500 font-medium",children:"to"}),(0,r.jsx)("input",{type:"time",value:(null===(n=v[e])||void 0===n?void 0:n.end)||"17:00",onChange:s=>N(t=>({...t,[e]:{...t[e],end:s.target.value}})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]},e)})}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:H,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Schedule"})]})]})})]})})})}var b=e=>{let{branchId:s}=e,[t,a]=(0,n.useState)([]),[l,i]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[h,u]=(0,n.useState)({name:"",date:"",type:"mandatory",is_paid:!0,is_recurring:!1,branch_id:s||"",description:""});(0,n.useEffect)(()=>{p()},[s]);let p=async()=>{i(!0);try{let{data:e,error:t}=await o.mQ.getHolidays(s);if(t)throw t;a(e||[])}catch(e){console.error("Error loading holidays:",e),g.Am.error("Failed to load holidays")}finally{i(!1)}},f=async()=>{try{let{data:e,error:t}=await o.mQ.createHoliday(h);if(t)throw t;g.Am.success("Holiday added successfully"),c(!1),u({name:"",date:"",type:"mandatory",is_paid:!0,is_recurring:!1,branch_id:s||"",description:""}),await p()}catch(e){console.error("Error adding holiday:",e),g.Am.error("Failed to add holiday")}},b=async()=>{if(x)try{let{error:e}=await o.mQ.updateHoliday(x.id,x);if(e)throw e;g.Am.success("Holiday updated successfully"),m(null),await p()}catch(e){console.error("Error updating holiday:",e),g.Am.error("Failed to update holiday")}},y=async e=>{if(confirm("Are you sure you want to delete this holiday?"))try{let{error:s}=await o.mQ.deleteHoliday(e);if(s)throw s;g.Am.success("Holiday deleted successfully"),await p()}catch(e){console.error("Error deleting holiday:",e),g.Am.error("Failed to delete holiday")}},j=e=>new Date(e).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),v=e=>{switch(e){case"mandatory":return"bg-red-100 text-red-800";case"optional":return"bg-blue-100 text-blue-800";case"branch_specific":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return l?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Holiday Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage company and branch-specific holidays"})]}),(0,r.jsxs)("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Holiday"]})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 0V3m6 4V3m-6 0h6m-6 0L9 21l3-3 3 3-3-9z"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No holidays found"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Add your first holiday to get started."})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Holiday"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pay Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recurring"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j(e.date)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(v(e.type)),children:e.type.replace("_"," ")})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_paid?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_paid?"Paid":"Unpaid"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_recurring?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.is_recurring?"Annual":"One-time"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,r.jsx)("button",{onClick:()=>m(e),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>y(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})}),d&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Holiday"}),(0,r.jsx)("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Holiday Name"}),(0,r.jsx)("input",{type:"text",value:h.name,onChange:e=>u({...h,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Christmas Day"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,r.jsx)("input",{type:"date",value:h.date,onChange:e=>u({...h,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,r.jsxs)("select",{value:h.type,onChange:e=>u({...h,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"mandatory",children:"Mandatory"}),(0,r.jsx)("option",{value:"optional",children:"Optional"}),(0,r.jsx)("option",{value:"branch_specific",children:"Branch Specific"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:h.description,onChange:e=>u({...h,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Optional description..."})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:h.is_paid,onChange:e=>u({...h,is_paid:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Paid Holiday"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:h.is_recurring,onChange:e=>u({...h,is_recurring:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Annual Holiday"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:f,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add Holiday"})]})]})}),x&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Holiday"}),(0,r.jsx)("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Holiday Name"}),(0,r.jsx)("input",{type:"text",value:x.name,onChange:e=>m({...x,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,r.jsx)("input",{type:"date",value:x.date,onChange:e=>m({...x,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,r.jsxs)("select",{value:x.type,onChange:e=>m({...x,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"mandatory",children:"Mandatory"}),(0,r.jsx)("option",{value:"optional",children:"Optional"}),(0,r.jsx)("option",{value:"branch_specific",children:"Branch Specific"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:x.description||"",onChange:e=>m({...x,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:x.is_paid,onChange:e=>m({...x,is_paid:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Paid Holiday"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:x.is_recurring,onChange:e=>m({...x,is_recurring:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Annual Holiday"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>m(null),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Update Holiday"})]})]})})]})};let y=e=>{let{onClose:s,onUserCreated:t}=e,[a,l]=(0,n.useState)({firstName:"",lastName:"",email:"",phone:"",username:"",password:"",role:"staff",position:""}),[i,d]=(0,n.useState)(!1),[c,x]=(0,n.useState)(null),m=async e=>{e.preventDefault(),x(null),d(!0);try{let e={...a},{data:r,error:l}=await o.ON.createUser(e);l?x(l.message):r.user&&setTimeout(()=>{t(),s()},1e3)}catch(e){x("Failed to create user. Please try again.")}finally{d(!1)}},h=e=>{l({...a,[e.target.name]:e.target.value})};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New User"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:c})}),(0,r.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,r.jsx)("input",{type:"text",name:"firstName",value:a.firstName,onChange:h,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,r.jsx)("input",{type:"text",name:"lastName",value:a.lastName,onChange:h,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,r.jsx)("input",{type:"email",name:"email",value:a.email,onChange:h,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,r.jsx)("input",{type:"text",name:"username",value:a.username,onChange:h,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:a.phone,onChange:h,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,r.jsx)("input",{type:"password",name:"password",value:a.password,onChange:h,required:!0,placeholder:"Enter a secure password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,r.jsxs)("select",{name:"role",value:a.role,onChange:h,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"staff",children:"Staff"}),(0,r.jsx)("option",{value:"pharmacist",children:"Pharmacist"}),(0,r.jsx)("option",{value:"c-level",children:"C-Level"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position (Optional)"}),(0,r.jsx)("input",{type:"text",name:"position",value:a.position,onChange:h,placeholder:"e.g. Senior Pharmacist, Manager...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:i,className:"".concat(i?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700"," text-white font-medium py-2 px-6 rounded-lg text-sm transition-all duration-200 shadow-lg hover:shadow-xl"),children:i?"Creating...":"Create User"})]})]})]})})})},j=e=>{let{user:s,onClose:t,onUserUpdated:a}=e,[l,i]=(0,n.useState)({firstName:s.first_name,lastName:s.last_name,email:s.email,phone:s.phone,username:s.username,role:s.role,position:s.position}),[d,c]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),h=async e=>{e.preventDefault(),m(null),c(!0);try{let e={first_name:l.firstName,last_name:l.lastName,email:l.email,phone:l.phone,username:l.username,role:l.role,position:l.position},{error:r}=await o.W4.updateUser(s.id,e);r?m(r.message):(a(e),t())}catch(e){m("Failed to update user. Please try again.")}finally{c(!1)}},u=e=>{i({...l,[e.target.name]:e.target.value})};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit User"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:x})}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,r.jsx)("input",{type:"text",name:"firstName",value:l.firstName,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,r.jsx)("input",{type:"text",name:"lastName",value:l.lastName,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,r.jsx)("input",{type:"email",name:"email",value:l.email,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,r.jsx)("input",{type:"text",name:"username",value:l.username,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:l.phone,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,r.jsxs)("select",{name:"role",value:l.role,onChange:u,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"staff",children:"Staff"}),(0,r.jsx)("option",{value:"pharmacist",children:"Pharmacist"}),(0,r.jsx)("option",{value:"c-level",children:"C-Level"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position (Optional)"}),(0,r.jsx)("input",{type:"text",name:"position",value:l.position,onChange:u,placeholder:"e.g. Senior Pharmacist, Manager...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"".concat(d?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700"," text-white font-medium py-2 px-6 rounded-lg text-sm transition-all duration-200 shadow-lg hover:shadow-xl"),children:d?"Saving...":"Save Changes"})]})]})]})})})},v=e=>{let{onClose:s,onFolderCreated:t}=e,[a,l]=(0,n.useState)({name:"",description:"",color:"#3B82F6"}),[i,d]=(0,n.useState)(!1),[c,x]=(0,n.useState)(null),m=async e=>{e.preventDefault(),x(null),d(!0);try{let{error:e}=await o.wt.createFolder(a);e?x(e.message):(t(),s())}catch(e){x("Failed to create folder. Please try again.")}finally{d(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Folder"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:c})}),(0,r.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Folder Name"}),(0,r.jsx)("input",{type:"text",value:a.name,onChange:e=>l({...a,name:e.target.value}),required:!0,placeholder:"e.g. Daily Operations",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),(0,r.jsx)("textarea",{value:a.description,onChange:e=>l({...a,description:e.target.value}),placeholder:"Brief description of this folder's purpose",rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folder Color"}),(0,r.jsx)("div",{className:"grid grid-cols-5 gap-2",children:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>l({...a,color:e}),className:"w-8 h-8 rounded-lg border-2 transition-all ".concat(a.color===e?"border-gray-800 scale-110":"border-gray-300 hover:border-gray-500"),style:{backgroundColor:e}},e))})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:i,className:"".concat(i?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"," text-white font-medium py-2 px-6 rounded-lg text-sm transition-colors"),children:i?"Creating...":"Create Folder"})]})]})]})})})},N=e=>{let{selectedFolder:s,onClose:t,onChecklistCreated:a}=e,[l,i]=(0,n.useState)({name:"",description:"",target_users:[],is_daily:!0,reset_time:"00:00"}),[d,c]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[h,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{g()},[]);let g=async()=>{try{let{data:e,error:s}=await o.W4.getAllUsers();s?console.error("Failed to load users:",s):u(e||[])}catch(e){console.error("Error loading users:",e)}},p=e=>{i(s=>({...s,target_users:s.target_users.includes(e)?s.target_users.filter(s=>s!==e):[...s.target_users,e]}))},f=async e=>{if(e.preventDefault(),m(null),c(!0),!s){m("Please select a folder first"),c(!1);return}if(0===l.target_users.length){m("Please select at least one user"),c(!1);return}try{let{error:e}=await o.wt.createChecklist({folder_id:s.id,...l});e?m(e.message):(a(),t())}catch(e){m("Failed to create checklist. Please try again.")}finally{c(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg mx-4",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Checklist"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"Folder:"})," ",s.name]})}),x&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:x})}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Checklist Name"}),(0,r.jsx)("input",{type:"text",value:l.name,onChange:e=>i({...l,name:e.target.value}),required:!0,placeholder:"e.g. Opening Procedures",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),(0,r.jsx)("textarea",{value:l.description,onChange:e=>i({...l,description:e.target.value}),placeholder:"Brief description of this checklist",rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Users *"}),(0,r.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-3 space-y-2",children:0===h.length?(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Loading users..."}):h.map(e=>{var s,t;return(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:l.target_users.includes(e.id),onChange:()=>p(e.id),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,r.jsxs)("div",{className:"ml-3 flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-white font-semibold text-xs",children:[null===(s=e.first_name)||void 0===s?void 0:s.charAt(0),null===(t=e.last_name)||void 0===t?void 0:t.charAt(0)]})}),(0,r.jsxs)("div",{className:"ml-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:[e.first_name," ",e.last_name]}),(0,r.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",e.role,")"]})]})]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:l.is_daily,onChange:e=>i({...l,is_daily:e.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Daily Reset"})]})}),l.is_daily&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reset Time"}),(0,r.jsx)("input",{type:"time",value:l.reset_time,onChange:e=>i({...l,reset_time:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"".concat(d?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"," text-white font-medium py-2 px-6 rounded-lg text-sm transition-colors"),children:d?"Creating...":"Create Checklist"})]})]})]})})})},w=e=>{let{checklist:s,items:t,onClose:a,onItemsUpdated:l}=e,[i,d]=(0,n.useState)(t),[c,x]=(0,n.useState)({title:"",description:"",is_required:!0}),[m,h]=(0,n.useState)(!1),[u,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{d(t.sort((e,s)=>e.sort_order-s.sort_order))},[t]);let p=async e=>{e.preventDefault(),g(null),h(!0);try{let{error:e}=await o.wt.createChecklistItem({checklist_id:s.id,...c,sort_order:i.length});e?g(e.message):(x({title:"",description:"",is_required:!0}),l())}catch(e){g("Failed to add item. Please try again.")}finally{h(!1)}},f=async e=>{if(confirm("Are you sure you want to delete this item?"))try{let{error:s}=await o.wt.deleteChecklistItem(e);s?alert("Error deleting item: "+s.message):l()}catch(e){alert("Error deleting item")}},b=(e,s)=>{let t=[...i],[r]=t.splice(e,1);t.splice(s,0,r);let a=t.map((e,s)=>({...e,sort_order:s}));d(a),o.wt.reorderChecklistItems(a.map(e=>({id:e.id,sort_order:e.sort_order})))};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Manage Tasks"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:s.name})]}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[u&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:u})}),(0,r.jsxs)("form",{onSubmit:p,className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Add New Task"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("input",{type:"text",value:c.title,onChange:e=>x({...c,title:e.target.value}),placeholder:"Task title",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("textarea",{value:c.description,onChange:e=>x({...c,description:e.target.value}),placeholder:"Task description (optional)",rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:c.is_required,onChange:e=>x({...c,is_required:e.target.checked}),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Required Task"})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:m?"Adding...":"Add Task"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["Current Tasks (",i.length,")",(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"Drag to reorder"})]}),0===i.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No tasks yet. Add your first task above."}):(0,r.jsx)("div",{className:"space-y-2",children:i.map((e,s)=>(0,r.jsx)("div",{className:"p-3 bg-white border border-gray-200 rounded-lg cursor-move hover:bg-gray-50 transition-colors",draggable:!0,onDragStart:e=>{e.dataTransfer.setData("text/plain",s.toString())},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),b(parseInt(e.dataTransfer.getData("text/plain")),s)},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-500 w-8",children:[s+1,"."]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900",children:e.title}),e.description&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]}),e.is_required&&(0,r.jsx)("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded",children:"Required"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),(0,r.jsx)("button",{onClick:()=>f(e.id),className:"text-red-600 hover:text-red-700 p-1",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})]})]})]})})},k=e=>{let{folder:s,onClose:t,onFolderUpdated:a}=e,[l,i]=(0,n.useState)({name:s.name||"",description:s.description||"",color:s.color||"#3B82F6"}),[d,c]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),h=async e=>{e.preventDefault(),m(null),c(!0);try{let{error:e}=await o.wt.updateFolder(s.id,l);e?m(e.message):(a(),t())}catch(e){m("Failed to update folder. Please try again.")}finally{c(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg mx-4",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Folder"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:x})}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folder Name *"}),(0,r.jsx)("input",{type:"text",value:l.name,onChange:e=>i(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter folder name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:l.description,onChange:e=>i(s=>({...s,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter folder description",rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>i(s=>({...s,color:e})),className:"w-8 h-8 rounded-lg border-2 ".concat(l.color===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e}},e))})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:d||!l.name.trim(),className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Updating...":"Update Folder"})]})]})]})})})},_=e=>{let{checklist:s,onClose:t,onChecklistUpdated:a}=e,[l,i]=(0,n.useState)({name:s.name||"",description:s.description||"",target_users:s.target_users||[],is_daily:s.is_daily||!0,reset_time:s.reset_time||"00:00"}),[d,c]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[h,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{g()},[]);let g=async()=>{try{let{data:e,error:s}=await o.W4.getAllUsers();s?console.error("Failed to load users:",s):u(e||[])}catch(e){console.error("Error loading users:",e)}},p=e=>{i(s=>({...s,target_users:s.target_users.includes(e)?s.target_users.filter(s=>s!==e):[...s.target_users,e]}))},f=async e=>{if(e.preventDefault(),m(null),c(!0),0===l.target_users.length){m("Please select at least one user"),c(!1);return}try{let{error:e}=await o.wt.updateChecklist(s.id,l);e?m(e.message):(a(),t())}catch(e){m("Failed to update checklist. Please try again.")}finally{c(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-lg mx-4",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Checklist"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:x})}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Checklist Name *"}),(0,r.jsx)("input",{type:"text",value:l.name,onChange:e=>i(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Enter checklist name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:l.description,onChange:e=>i(s=>({...s,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500",placeholder:"Enter checklist description",rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Users *"}),(0,r.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-3 space-y-2",children:0===h.length?(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Loading users..."}):h.map(e=>{var s,t;return(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:l.target_users.includes(e.id),onChange:()=>p(e.id),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,r.jsxs)("div",{className:"ml-3 flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-white font-semibold text-xs",children:[null===(s=e.first_name)||void 0===s?void 0:s.charAt(0),null===(t=e.last_name)||void 0===t?void 0:t.charAt(0)]})}),(0,r.jsxs)("div",{className:"ml-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:[e.first_name," ",e.last_name]}),(0,r.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",e.role,")"]})]})]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:l.is_daily,onChange:e=>i(s=>({...s,is_daily:e.target.checked})),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Daily Reset"})]})}),l.is_daily&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reset Time"}),(0,r.jsx)("input",{type:"time",value:l.reset_time,onChange:e=>i(s=>({...s,reset_time:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:d||!l.name.trim(),className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Updating...":"Update Checklist"})]})]})]})})})},C=e=>{let{onClose:s,onBranchCreated:t}=e,[a,l]=(0,n.useState)({branch_name:"",branch_code:"",address:"",city:"",state:"",postcode:"",country:"Myanmar",phone_number:"",email:"",branch_type:"main",pharmacy_license_number:"",notes:""}),[i,o]=(0,n.useState)(!1),[c,x]=(0,n.useState)(null),m=async e=>{e.preventDefault(),x(null),o(!0);try{let{error:e}=await d.createBranch(a);e?x(e.message):t()}catch(e){x("Failed to create branch. Please try again.")}finally{o(!1)}},h=e=>{l({...a,[e.target.name]:e.target.value})};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Branch"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:c})}),(0,r.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Name *"}),(0,r.jsx)("input",{type:"text",name:"branch_name",value:a.branch_name,onChange:h,required:!0,placeholder:"Enter branch name",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Code *"}),(0,r.jsx)("input",{type:"text",name:"branch_code",value:a.branch_code,onChange:h,required:!0,placeholder:"Enter branch code",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,r.jsx)("textarea",{name:"address",value:a.address,onChange:h,required:!0,rows:2,placeholder:"Enter complete address",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,r.jsx)("input",{type:"text",name:"city",value:a.city,onChange:h,required:!0,placeholder:"Enter city",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,r.jsx)("input",{type:"text",name:"state",value:a.state,onChange:h,placeholder:"Enter state/region",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode *"}),(0,r.jsx)("input",{type:"text",name:"postcode",value:a.postcode,onChange:h,required:!0,placeholder:"Enter postcode",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",name:"phone_number",value:a.phone_number,onChange:h,placeholder:"Enter phone number",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:a.email,onChange:h,placeholder:"Enter email address",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Type"}),(0,r.jsxs)("select",{name:"branch_type",value:a.branch_type,onChange:h,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"main",children:"Main Branch"}),(0,r.jsx)("option",{value:"satellite",children:"Satellite Branch"}),(0,r.jsx)("option",{value:"clinic",children:"Clinic"}),(0,r.jsx)("option",{value:"hospital",children:"Hospital"}),(0,r.jsx)("option",{value:"specialty",children:"Specialty"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pharmacy License #"}),(0,r.jsx)("input",{type:"text",name:"pharmacy_license_number",value:a.pharmacy_license_number,onChange:h,placeholder:"Enter license number",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,r.jsx)("textarea",{name:"notes",value:a.notes,onChange:h,rows:3,placeholder:"Optional notes about this branch",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:i,className:"".concat(i?"bg-gray-400 cursor-not-allowed":"bg-orange-600 hover:bg-orange-700"," text-white font-medium py-2 px-6 rounded-lg text-sm transition-colors"),children:i?"Creating...":"Create Branch"})]})]})]})})})},L=e=>{let{branch:s,onClose:t,onBranchUpdated:a}=e,[l,i]=(0,n.useState)({branch_name:s.branch_name||"",branch_code:s.branch_code||"",address:s.address||"",city:s.city||"",state:s.state||"",postcode:s.postcode||"",phone_number:s.phone_number||"",email:s.email||"",branch_type:s.branch_type||"main",pharmacy_license_number:s.pharmacy_license_number||"",notes:s.notes||""}),[o,c]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),h=async e=>{e.preventDefault(),m(null),c(!0);try{let{error:e}=await d.updateBranch(s.id,l);e?m(e.message):a()}catch(e){m("Failed to update branch. Please try again.")}finally{c(!1)}},u=e=>{i({...l,[e.target.name]:e.target.value})};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Branch"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 p-1",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:x})}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Name *"}),(0,r.jsx)("input",{type:"text",name:"branch_name",value:l.branch_name,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Code *"}),(0,r.jsx)("input",{type:"text",name:"branch_code",value:l.branch_code,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,r.jsx)("textarea",{name:"address",value:l.address,onChange:u,required:!0,rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,r.jsx)("input",{type:"text",name:"city",value:l.city,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,r.jsx)("input",{type:"text",name:"state",value:l.state,onChange:u,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode *"}),(0,r.jsx)("input",{type:"text",name:"postcode",value:l.postcode,onChange:u,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",name:"phone_number",value:l.phone_number,onChange:u,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:l.email,onChange:u,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Type"}),(0,r.jsxs)("select",{name:"branch_type",value:l.branch_type,onChange:u,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"main",children:"Main Branch"}),(0,r.jsx)("option",{value:"satellite",children:"Satellite Branch"}),(0,r.jsx)("option",{value:"clinic",children:"Clinic"}),(0,r.jsx)("option",{value:"hospital",children:"Hospital"}),(0,r.jsx)("option",{value:"specialty",children:"Specialty"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pharmacy License #"}),(0,r.jsx)("input",{type:"text",name:"pharmacy_license_number",value:l.pharmacy_license_number,onChange:u,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,r.jsx)("textarea",{name:"notes",value:l.notes,onChange:u,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg text-sm transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:o,className:"".concat(o?"bg-gray-400 cursor-not-allowed":"bg-orange-600 hover:bg-orange-700"," text-white font-medium py-2 px-6 rounded-lg text-sm transition-colors"),children:o?"Updating...":"Update Branch"})]})]})]})})})},M=e=>{let{branch:s,staff:t,loadingStaff:a,onClose:l,onAssignStaff:n}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[85vh] overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 px-6 py-8 text-white",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-bold mb-2",children:s.branch_name}),(0,r.jsxs)("p",{className:"text-orange-100 text-sm",children:[s.branch_code," • ",s.city]}),(0,r.jsxs)("div",{className:"flex items-center mt-3 space-x-4",children:[(0,r.jsx)("span",{className:"bg-white bg-opacity-20 text-white px-3 py-1 rounded-full text-xs font-medium",children:s.branch_type}),(0,r.jsxs)("span",{className:"text-orange-100 text-sm",children:[(0,r.jsx)("span",{className:"font-semibold text-white",children:t.length})," staff members"]})]})]}),(0,r.jsx)("button",{onClick:l,className:"text-white hover:text-orange-100 p-2 rounded-full hover:bg-white hover:bg-opacity-10 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"px-6 py-6 overflow-y-auto max-h-[calc(85vh-140px)]",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h4",{className:"text-xl font-bold text-gray-900",children:"Team Members"}),(0,r.jsx)("button",{onClick:()=>{l(),n()},className:"bg-orange-600 hover:bg-orange-700 text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Add Staff"})]}),a?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto"}),(0,r.jsx)("p",{className:"text-gray-500 mt-4",children:"Loading team members..."})]}):0===t.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,r.jsx)("h5",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Team Members Yet"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"This branch doesn't have any staff assigned"}),(0,r.jsx)("button",{onClick:()=>{l(),n()},className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Assign First Team Member"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:t.map(e=>{var s,t,a,l,n,i,o,d;return(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all duration-200 hover:border-orange-200",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsxs)("span",{className:"text-white font-bold text-lg",children:[null===(t=e.user)||void 0===t?void 0:null===(s=t.first_name)||void 0===s?void 0:s.charAt(0),null===(l=e.user)||void 0===l?void 0:null===(a=l.last_name)||void 0===a?void 0:a.charAt(0)]})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h5",{className:"font-bold text-gray-900 text-lg",children:[null===(n=e.user)||void 0===n?void 0:n.first_name," ",null===(i=e.user)||void 0===i?void 0:i.last_name]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:null===(o=e.user)||void 0===o?void 0:o.email}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:null===(d=e.user)||void 0===d?void 0:d.role}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.assignment_date).toLocaleDateString()})]}),e.position&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2 font-medium",children:e.position})]})]})},e.id)})}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:[(0,r.jsx)("h5",{className:"text-lg font-bold text-blue-900 mb-4",children:"Team Overview"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(t.reduce((e,s)=>{var t;let r=(null===(t=s.user)||void 0===t?void 0:t.role)||"Unknown";return e[r]=(e[r]||0)+1,e},{})).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"text-center bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:t}),(0,r.jsx)("div",{className:"text-sm text-blue-700 capitalize font-medium",children:s})]},s)})})]})]})]})}),(0,r.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:l,className:"bg-gray-600 hover:bg-gray-700 text-white font-medium py-2.5 px-6 rounded-xl text-sm transition-colors",children:"Close"})})})]})})},S=e=>{var s,t,a,l,i,o,d;let{userData:c,completedCount:x,totalCount:m,avgCompletion:h,folders:u}=e,[g,p]=(0,n.useState)(null);return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-slate-50 to-gray-50 p-6 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsxs)("span",{className:"text-white font-bold text-lg",children:[null===(t=c.user)||void 0===t?void 0:null===(s=t.first_name)||void 0===s?void 0:s.charAt(0),null===(l=c.user)||void 0===l?void 0:null===(a=l.last_name)||void 0===a?void 0:a.charAt(0)]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:[null===(i=c.user)||void 0===i?void 0:i.first_name," ",null===(o=c.user)||void 0===o?void 0:o.last_name]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 flex items-center mt-1",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:null===(d=c.user)||void 0===d?void 0:d.role})})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:[Math.round(h),"%"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[x,"/",m," checklists completed"]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(h,"%")}})})})]})]})}),(0,r.jsx)("div",{className:"p-6 space-y-4",children:c.checklists.sort((e,s)=>s.completion_percentage-e.completion_percentage).map(e=>{var s,t;return(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>p(g===e.checklist_id?null:e.checklist_id),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center shadow-sm ".concat(e.is_fully_completed?"bg-green-100 border-2 border-green-200":e.completed_items>0?"bg-blue-100 border-2 border-blue-200":"bg-gray-100 border-2 border-gray-200"),children:e.is_fully_completed?(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):e.completed_items>0?(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 text-lg",children:null===(s=e.checklist)||void 0===s?void 0:s.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:(null===(t=u.find(s=>{var t;return s.id===(null===(t=e.checklist)||void 0===t?void 0:t.folder_id)}))||void 0===t?void 0:t.name)||"No folder"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold ".concat(e.is_fully_completed?"bg-green-100 text-green-800":e.completed_items>0?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.is_fully_completed?"Completed":e.completed_items>0?"In Progress":"Not Started"}),(0,r.jsxs)("div",{className:"text-lg font-bold text-gray-900 mt-1",children:[Math.round(e.completion_percentage),"%"]})]}),(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(g===e.checklist_id?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.completed_items," of ",e.total_items," tasks completed"]}),e.completed_at&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Completed at ",new Date(e.completed_at).toLocaleTimeString()]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,r.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(e.is_fully_completed?"bg-gradient-to-r from-green-500 to-green-600":e.completed_items>0?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"),style:{width:"".concat(e.completion_percentage,"%")}})})]})]}),g===e.checklist_id&&(0,r.jsx)("div",{className:"border-t border-gray-200 bg-white",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Individual Tasks"}),e.tasks&&e.tasks.length>0?(0,r.jsx)("div",{className:"space-y-3",children:e.tasks.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,r.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center ".concat(e.completed?"bg-green-100 border-2 border-green-300":"bg-gray-100 border-2 border-gray-300"),children:e.completed?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):(0,r.jsx)("span",{className:"text-gray-400 text-xs font-bold",children:s+1})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h6",{className:"font-medium ".concat(e.completed?"text-green-800 line-through":"text-gray-900"),children:e.title}),e.description&&(0,r.jsx)("p",{className:"text-sm mt-1 ".concat(e.completed?"text-green-600":"text-gray-600"),children:e.description}),e.completed&&e.completed_at&&(0,r.jsxs)("p",{className:"text-xs text-green-600 mt-2",children:["✓ Completed at ",new Date(e.completed_at).toLocaleTimeString()]})]}),e.is_required&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Required"})]},e.id))}):(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"No tasks defined for this checklist."})]})})]},e.checklist_id)})})]})};var B=()=>{var e,s,t,a,c,x,p,B,A,D,W;let H=(0,i.useRouter)(),[z,E]=(0,n.useState)(null),[P,F]=(0,n.useState)(null),[V,O]=(0,n.useState)([]),[T,U]=(0,n.useState)(!0),[R,q]=(0,n.useState)(!1),[I,Q]=(0,n.useState)(!1),[G,Y]=(0,n.useState)(()=>localStorage.getItem("adminActiveSection")||"users");(0,n.useEffect)(()=>{localStorage.setItem("adminActiveSection",G)},[G]);let[K,Z]=(0,n.useState)(null),[X,J]=(0,n.useState)(!1),[$,ee]=(0,n.useState)([]),[es,et]=(0,n.useState)([]),[er,ea]=(0,n.useState)(null),[el,en]=(0,n.useState)(null),[ei,eo]=(0,n.useState)([]),[ed,ec]=(0,n.useState)(!1),[ex,em]=(0,n.useState)(!1),[eh,eu]=(0,n.useState)(!1),[eg,ep]=(0,n.useState)([]),[ef,eb]=(0,n.useState)(null),[ey,ej]=(0,n.useState)(!1),[ev,eN]=(0,n.useState)(!1),[ew,ek]=(0,n.useState)(null),[e_,eC]=(0,n.useState)(!1),[eL,eM]=(0,n.useState)([]),[eS,eB]=(0,n.useState)(!1),[eA,eD]=(0,n.useState)(!1),[eW,eH]=(0,n.useState)(null),[ez,eE]=(0,n.useState)(new Set),[eP,eF]=(0,n.useState)(new Set),[eV,eO]=(0,n.useState)(null),[eT,eU]=(0,n.useState)([]),[eR,eq]=(0,n.useState)(!1),[eI,eQ]=(0,n.useState)(null),[eG,eY]=(0,n.useState)({}),[eK,eZ]=(0,n.useState)(!1),[eX,eJ]=(0,n.useState)(null),[e$,e0]=(0,n.useState)(!1),[e2,e1]=(0,n.useState)(null),[e4,e6]=(0,n.useState)(!1),[e5,e3]=(0,n.useState)([]),[e7,e9]=(0,n.useState)(new Date().toISOString().split("T")[0]),[e8,se]=(0,n.useState)(!1),[ss,st]=(0,n.useState)([]),[sr,sa]=(0,n.useState)(null),[sl,sn]=(0,n.useState)(!1),[si,so]=(0,n.useState)(new Date().toISOString().slice(0,7)),[sd,sc]=(0,n.useState)(!1);(0,n.useEffect)(()=>{sx(),sm(),"checklists"===G&&sh(),"branches"===G&&(sk(),eg.forEach(e=>sC(e.id))),"monitoring"===G&&sM(),"payslips"===G&&sS()},[G,e7,si]);let sx=async()=>{try{let e=await o.ON.getCurrentUser();if(!e){H.push("/login");return}if(!await o.ON.isAdmin()){H.push("/dashboard");return}E(e);try{let e=await o.ON.getCurrentUserWithProfile();F(null==e?void 0:e.profile)}catch(e){console.log("Profile data not available yet:",e)}}catch(e){console.error("Auth check failed:",e),H.push("/login")}},sm=async()=>{try{let{data:e,error:s}=await o.W4.getAllUsers();s?console.error("Failed to load users:",s):O(e||[])}catch(e){console.error("Error loading users:",e)}finally{U(!1)}},sh=async e=>{try{let{data:t,error:r}=await o.wt.getFolders(e);if(r){var s;console.error("Failed to load folders:",r),(null===(s=r.message)||void 0===s?void 0:s.includes("database setup"))&&alert("Database not set up. Please follow the setup instructions in setup-database.md")}else ee(t||[])}catch(e){console.error("Error loading folders:",e),alert("Unable to connect to database. Please check your environment variables.")}},su=async e=>{try{let{data:s,error:t}=await o.wt.getChecklists(e);t?console.error("Failed to load checklists:",t):et(s||[])}catch(e){console.error("Error loading checklists:",e)}},sg=async e=>{try{let{data:s,error:t}=await o.wt.getChecklistItems(e);t?console.error("Failed to load checklist items:",t):eo(s||[])}catch(e){console.error("Error loading checklist items:",e)}},sp=e=>{ea(e),en(null),eo([]),su(e.id)},sf=e=>{en(e),sg(e.id)},sb=async()=>{await o.ON.signOut(),H.push("/login")},sy=async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{let{error:s}=await o.W4.deleteUser(e);if(s){let e=(null==s?void 0:s.message)||s||"Unknown error occurred";alert("Error deleting user: "+e)}else alert("User deleted successfully"),sm()}catch(e){alert("Error deleting user: "+((null==e?void 0:e.message)||e||"Unknown error occurred"))}},sj=e=>{Z(e),J(!0)},sv=async e=>{try{J(!1),Z(null),sm(),alert("User updated successfully")}catch(e){alert("Error updating user")}},sN=async(e,s)=>{if(confirm('Are you sure you want to delete the folder "'.concat(s,'"? This will also delete all checklists inside it.')))try{let{error:s}=await o.wt.deleteFolder(e);s?alert("Error deleting folder: "+s.message):(alert("Folder deleted successfully"),sh(),(null==er?void 0:er.id)===e&&(ea(null),et([])))}catch(e){alert("Error deleting folder")}},sw=async(e,s)=>{if(confirm('Are you sure you want to delete the checklist "'.concat(s,'"?')))try{let{error:s}=await o.wt.deleteChecklist(e);s?alert("Error deleting checklist: "+s.message):(alert("Checklist deleted successfully"),er&&su(er.id),(null==el?void 0:el.id)===e&&(en(null),eo([])))}catch(e){alert("Error deleting checklist")}},sk=async()=>{try{let{data:e,error:s}=await d.getAllBranches();s?console.error("Failed to load branches:",s):ep(e||[])}catch(e){console.error("Error loading branches:",e)}},s_=async e=>{eB(!0);try{let{data:s,error:t}=await d.getBranchStaff(e);t?(console.error("Error loading branch staff:",t),eM([])):eM(s||[])}catch(e){console.error("Error loading branch staff:",e),eM([])}finally{eB(!1)}},sC=async e=>{try{let{data:s}=await o.bR.getActiveStaff(e),{data:t}=await o.bR.getStaffOnBreak(e),{data:r}=await d.getBranchStaff(e);eY(a=>({...a,[e]:{active:(null==s?void 0:s.length)||0,onBreak:(null==t?void 0:t.length)||0,total:(null==r?void 0:r.length)||0}}))}catch(e){console.error("Error loading branch staff counts:",e)}},sL=async e=>{eO(e);let{data:s}=await d.getBranchStaff(e.id);if(s){let e=s.map(e=>e.user_id);eU(e5.filter(s=>e.includes(s.user_id)))}},sM=async()=>{se(!0);try{let{data:e,error:s}=await o.wt.getAllUsersProgress(e7);s?(console.error("Failed to load users progress:",s),alert("Failed to load progress data. Please check the console for details.")):(console.log("Loaded progress data:",e),e3(e||[]))}catch(e){console.error("Error loading users progress:",e),alert("Error loading progress data. Please check the console for details.")}finally{se(!1)}},sS=async()=>{sc(!0);try{let e="".concat(si,"-01"),s=new Date(new Date(si).getFullYear(),new Date(si).getMonth()+1,0).toISOString().slice(0,10),{data:t,error:r}=await d.getAllBranches();if(r){console.error("Failed to load branches:",r);return}let a=t.map(async t=>{let{data:r,error:a}=await d.getBranchStaff(t.id);if(a)return console.error("Failed to load staff for branch ".concat(t.name,":"),a),{branch:t,employees:[]};let l=r.map(async t=>{var r,a,l,n,i,d,c,x,m;let{data:h,error:u}=await o.bR.getTimeEntries(t.user_id,e,s);if(u)return console.error("Failed to load time entries for user ".concat(t.user_id,":"),u),{...t,first_name:(null===(d=t.user)||void 0===d?void 0:d.first_name)||"Unknown",last_name:(null===(c=t.user)||void 0===c?void 0:c.last_name)||"User",email:(null===(x=t.user)||void 0===x?void 0:x.email)||"",role:(null===(m=t.user)||void 0===m?void 0:m.role)||"staff",timeEntries:[],totalHours:0,totalPay:0};let g=t.pay_rate||12,{totalHours:p,entries:f}=await o.bR.calculateScheduledHours(t.user_id,e,s);return{...t,first_name:(null===(r=t.user)||void 0===r?void 0:r.first_name)||"Unknown",last_name:(null===(a=t.user)||void 0===a?void 0:a.last_name)||"User",email:(null===(l=t.user)||void 0===l?void 0:l.email)||"",role:(null===(n=t.user)||void 0===n?void 0:n.role)||"staff",position:t.position||(null===(i=t.user)||void 0===i?void 0:i.position)||"Staff",timeEntries:f||h||[],totalHours:Math.round(100*p)/100,totalPay:Math.round(p*g*100)/100}}),n=await Promise.all(l);return{branch:t,employees:n}}),l=await Promise.all(a);st(l)}catch(e){console.error("Error loading payslip data:",e)}finally{sc(!1)}};if(T)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading management dashboard..."})]})});(null==P?void 0:P.role)||null==z||null===(e=z.user_metadata)||void 0===e||e.role;let sB=(null==P?void 0:P.first_name)||(null==z?void 0:null===(s=z.user_metadata)||void 0===s?void 0:s.first_name)||"User",sA=(null==P?void 0:P.last_name)||(null==z?void 0:null===(t=z.user_metadata)||void 0===t?void 0:t.last_name)||"";P?"".concat(P.first_name," ").concat(P.last_name):(null==z?void 0:null===(a=z.user_metadata)||void 0===a?void 0:a.full_name)||"".concat(sB," ").concat(sA);let sD=(null==P?void 0:P.position)||(null==z?void 0:null===(c=z.user_metadata)||void 0===c?void 0:c.position)||"",sW=[{name:"Users",id:"users",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),current:"users"===G},{name:"Checklists",id:"checklists",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),current:"checklists"===G},{name:"Branches",id:"branches",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),current:"branches"===G},{name:"SOP Management",id:"sop",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),current:"sop"===G},{name:"Monitoring",id:"monitoring",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),current:"monitoring"===G},{name:"Payslips",id:"payslips",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),current:"payslips"===G},{name:"Holidays",id:"holidays",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 0V3m6 4V3m-6 0h6m-6 0L9 21l3-3 3 3-3-9z"})}),current:"holidays"===G},{name:"Overview",id:"overview",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),current:"overview"===G},{name:"System Settings",id:"settings",icon:(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),current:"settings"===G}],sH=new Date().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),sz=async e=>{try{await sk(),eZ(!1),eb(null),g.Am.success("Branch location updated successfully")}catch(e){console.error("Error updating branch location:",e),g.Am.error("Failed to update branch location")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:"Management Dashboard - Hope Pharmacy IMS"})}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[I&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>Q(!1)}),(0,r.jsx)("div",{className:"fixed top-0 left-0 w-64 h-full bg-white shadow-lg z-50",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-6 border-b border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:"H"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Management Panel"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Hope Pharmacy IMS"})]})]}),(0,r.jsx)("button",{onClick:()=>Q(!1),className:"p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-white font-semibold text-sm",children:[(null==P?void 0:null===(x=P.first_name)||void 0===x?void 0:x.charAt(0))||"A",(null==P?void 0:null===(p=P.last_name)||void 0===p?void 0:p.charAt(0))||"D"]})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900 truncate",children:P?"".concat(P.first_name," ").concat(P.last_name):"Administrator"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:"Administrator • Management Panel"})]})]})}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:[{id:"users",name:"User Management",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.239"})})},{id:"checklists",name:"Checklist Management",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"branches",name:"Branch Management",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{id:"payslips",name:"Payroll Management",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"holidays",name:"Holiday Management",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}].map(e=>(0,r.jsxs)("button",{onClick:()=>{Y(e.id),Q(!1)},className:"".concat(G===e.id?"bg-purple-50 border-purple-300 text-purple-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:text-gray-900"," group flex items-center px-3 py-2 text-sm font-medium border-l-4 rounded-r-lg transition-all duration-200 w-full"),children:[(0,r.jsx)("span",{className:"".concat(G===e.id?"text-purple-500":"text-gray-400 group-hover:text-gray-500"," mr-3"),children:e.icon}),(0,r.jsx)("span",{className:"flex-1 text-left",children:e.name})]},e.id))}),(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-gray-100",children:[(0,r.jsxs)("a",{href:"/dashboard",className:"group flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 w-full mb-2",children:[(0,r.jsxs)("svg",{className:"text-gray-400 group-hover:text-blue-500 mr-3 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v6a2 2 0 01-2 2H10a2 2 0 01-2-2V5z"})]}),"User Dashboard"]}),(0,r.jsxs)("button",{onClick:sb,className:"group flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 w-full",children:[(0,r.jsx)("svg",{className:"text-gray-400 group-hover:text-red-500 mr-3 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})})]}),(0,r.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col",children:(0,r.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center flex-shrink-0 px-6 py-6 border-b border-gray-100",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:"H"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Management Panel"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Hope Pharmacy IMS"})]})]}),(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsxs)("button",{onClick:()=>H.push("/dashboard"),className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl px-4 py-3 text-sm font-semibold flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-2 space-y-1",children:sW.map(e=>(0,r.jsxs)("button",{onClick:()=>Y(e.id),className:"".concat(e.current?"bg-gradient-to-r from-purple-50 to-pink-50 text-purple-700 border-r-2 border-purple-600 shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"," group flex items-center px-3 py-3 text-sm font-medium w-full text-left transition-all duration-200 rounded-l-xl"),children:[(0,r.jsx)("span",{className:"mr-3",children:e.icon}),e.name]},e.name))}),(0,r.jsx)("div",{className:"flex-shrink-0 p-4 border-t border-gray-100",children:(0,r.jsxs)("button",{onClick:sb,className:"w-full bg-gray-50 hover:bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)("div",{className:"md:hidden bg-white shadow-sm border-b border-gray-200 px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>Q(!0),className:"p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,r.jsxs)("div",{className:"ml-3 flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-600 to-pink-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"H"})}),(0,r.jsx)("h1",{className:"ml-2 text-lg font-bold text-gray-900",children:"Management Panel"})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-white font-semibold text-xs",children:[(null==P?void 0:null===(B=P.first_name)||void 0===B?void 0:B.charAt(0))||"A",(null==P?void 0:null===(A=P.last_name)||void 0===A?void 0:A.charAt(0))||"D"]})})})]})}),(0,r.jsx)("header",{className:"hidden md:block bg-white border-b border-gray-200 shadow-sm",children:(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 capitalize",children:"users"===G?"Users":"overview"===G?"Overview":"branches"===G?"Branch Management":"sop"===G?"SOP Management":"payslips"===G?"Payslip Management":G}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:sH})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search users...",className:"w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,r.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-600 relative rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 7H3a2 2 0 000 4h18a2 2 0 000-4z"})]}),(0,r.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-50 rounded-lg px-3 py-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-white font-semibold text-sm",children:[sB.charAt(0),sA.charAt(0)||sB.charAt(1)]})}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:sB}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:sD||""})]}),(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]})})}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto bg-gray-50",children:(0,r.jsxs)("div",{className:"px-4 md:px-6 py-4 md:py-8",children:["overview"===G&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Welcome, ",sB]}),(0,r.jsx)("p",{className:"text-purple-100 text-lg",children:"Manage your pharmacy system and users from here"})]}),(0,r.jsx)("div",{className:"absolute right-8 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("div",{className:"w-40 h-40 bg-white bg-opacity-10 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-20 h-20 text-white opacity-50",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"System Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-indigo-600 rounded-xl p-6 text-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-indigo-200 text-sm font-medium",children:"Total Users"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:V.length})]}),(0,r.jsx)("svg",{className:"w-8 h-8 text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})]})}),(0,r.jsx)("div",{className:"bg-green-500 rounded-xl p-6 text-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-200 text-sm font-medium",children:"Active Staff"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:V.filter(e=>"administrator"!==e.role).length})]}),(0,r.jsx)("svg",{className:"w-8 h-8 text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})]})}),(0,r.jsx)("div",{className:"bg-yellow-500 rounded-xl p-6 text-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-yellow-200 text-sm font-medium",children:"Pharmacists"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:V.filter(e=>"pharmacist"===e.role).length})]}),(0,r.jsxs)("svg",{className:"w-8 h-8 text-yellow-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2v1a1 1 0 102 0V3h2v1a1 1 0 102 0V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]})]})}),(0,r.jsx)("div",{className:"bg-purple-500 rounded-xl p-6 text-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-purple-200 text-sm font-medium",children:"Administrators"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:V.filter(e=>"administrator"===e.role).length})]}),(0,r.jsx)("svg",{className:"w-8 h-8 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Create New User"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Add new staff members to the system"}),(0,r.jsx)("button",{onClick:()=>q(!0),className:"mt-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Create User"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Manage Users"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"View and edit existing user accounts"}),(0,r.jsx)("button",{onClick:()=>Y("users"),className:"mt-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Users"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"System Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Configure system preferences"}),(0,r.jsx)("button",{onClick:()=>Y("settings"),className:"mt-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Settings"})]})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"System Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"New user registered"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"System backup completed"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"1 hour ago"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"User role updated"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"3 hours ago"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"System Status"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Database"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Online"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Authentication"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Active"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Storage"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-yellow-600 font-medium",children:"78% Used"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"API"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Responsive"})]})]})]})]})]})]})]}),"users"===G&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"User Management"}),(0,r.jsx)("p",{className:"text-indigo-100 text-lg",children:"Manage all user accounts, roles, and permissions"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:V.length}),(0,r.jsx)("div",{className:"text-indigo-200 text-sm",children:"Total Users"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:V.length})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:V.filter(e=>e.is_active).length})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2v1a1 1 0 102 0V3h2v1a1 1 0 102 0V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pharmacists"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:V.filter(e=>"pharmacist"===e.role).length})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Administrators"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:V.filter(e=>"administrator"===e.role).length})]})]})})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,r.jsx)("div",{className:"flex-1 max-w-lg",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search users by name, email, or role...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filter"]}),(0,r.jsxs)("button",{onClick:()=>q(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg text-sm font-semibold flex items-center transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New User"]})]})]})}),(0,r.jsx)("div",{className:"bg-white shadow-sm rounded-xl border border-gray-100 overflow-hidden",children:0===V.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.239"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Get started by creating the first user account."}),(0,r.jsx)("button",{onClick:()=>q(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg text-sm font-medium transition-colors",children:"Create First User"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Information"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(e=>{var s,t;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:(0,r.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg",children:(0,r.jsxs)("span",{className:"text-sm font-semibold text-white",children:[null===(s=e.first_name)||void 0===s?void 0:s[0],null===(t=e.last_name)||void 0===t?void 0:t[0]]})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[e.first_name," ",e.last_name]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username]})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.email}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.phone||"No phone provided"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full ".concat("administrator"===e.role?"bg-purple-100 text-purple-800":"pharmacist"===e.role?"bg-green-100 text-green-800":"c-level"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.role||"staff"}),(0,r.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.last_login?new Date(e.last_login).toLocaleDateString():"Never logged in"}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Created ",new Date(e.created_at).toLocaleDateString()]})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>sj(e),className:"text-indigo-600 hover:text-indigo-900 bg-indigo-50 hover:bg-indigo-100 px-3 py-2 rounded-lg transition-colors flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),"administrator"!==e.role&&(0,r.jsxs)("button",{onClick:()=>sy(e.id),className:"text-red-600 hover:text-red-900 bg-red-50 hover:bg-red-100 px-3 py-2 rounded-lg transition-colors flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]},e.id)})})]})})})]}),"checklists"===G&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-8 text-white",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Checklist Management"}),(0,r.jsx)("p",{className:"text-green-100 text-lg",children:"Create and manage daily checklists for staff"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:$.length}),(0,r.jsx)("div",{className:"text-green-200 text-sm",children:"Active Folders"})]})]})}),er?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>{ea(null),en(null),et([])},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 bg-white rounded-lg px-4 py-2 border border-gray-200 hover:border-gray-300 transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{children:"Back to Folders"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg",style:{backgroundColor:er.color}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:er.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:er.description})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 bg-green-50",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Checklists"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage checklists in this folder"})]}),(0,r.jsxs)("button",{onClick:()=>em(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,r.jsx)("span",{children:"Add Checklist"})]})]})}),(0,r.jsx)("div",{className:"p-6",children:0===es.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No checklists in this folder"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Create your first checklist for this folder"}),(0,r.jsx)("button",{onClick:()=>em(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium",children:"Create First Checklist"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:es.map(e=>{var s;return(0,r.jsxs)("div",{className:"bg-gray-50 hover:bg-gray-100 rounded-xl p-6 transition-all duration-200 border-2 border-transparent hover:border-green-200 hover:shadow-md group",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 text-lg cursor-pointer flex-1",onClick:()=>sf(e),children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.is_daily?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.is_daily?"Daily":"One-time"}),(0,r.jsxs)("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),e1(e),e6(!0)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"Edit checklist",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),sw(e.id,e.name)},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Delete checklist",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-3 cursor-pointer",onClick:()=>sf(e),children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>sf(e),children:[(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"Assigned:"}),(0,r.jsx)("div",{className:"flex space-x-1",children:(0,r.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:[(null===(s=e.target_users)||void 0===s?void 0:s.length)||0," users"]})})]}),(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),en(e),eu(!0)},className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Manage Tasks"})]})]},e.id)})})})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Create New"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"Folder"})]})]}),(0,r.jsx)("button",{onClick:()=>ec(!0),className:"mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Add Folder"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"View"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"Progress"})]})]}),(0,r.jsx)("button",{onClick:()=>Y("monitoring"),className:"mt-4 w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Reports"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-blue-50",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Checklist Folders"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Organize your checklists into folders"})]}),(0,r.jsx)("div",{className:"p-6",children:0===$.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No folders yet"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Create your first folder to organize checklists"}),(0,r.jsx)("button",{onClick:()=>ec(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"Create First Folder"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(e=>(0,r.jsx)("div",{className:"bg-gray-50 hover:bg-gray-100 rounded-xl p-6 transition-all duration-200 border-2 border-transparent hover:border-blue-200 hover:shadow-md group",children:(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shadow-sm cursor-pointer",style:{backgroundColor:e.color},onClick:()=>sp(e),children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,r.jsxs)("div",{className:"flex-1",onClick:()=>sp(e),children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 text-lg mb-2 cursor-pointer",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-3 cursor-pointer",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center text-xs text-gray-400 cursor-pointer",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Click to view checklists"]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),eJ(e),e0(!0)},className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit folder",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),sN(e.id,e.name)},className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete folder",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})})]})]})]}),"monitoring"===G&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 rounded-2xl p-8 text-white shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-white to-indigo-100 bg-clip-text text-transparent",children:"Employee Progress Monitoring"}),(0,r.jsx)("p",{className:"text-indigo-100 text-lg font-medium",children:"Real-time tracking with detailed task visibility"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-5xl font-bold mb-2",children:e5.length}),(0,r.jsx)("div",{className:"text-indigo-200 text-sm uppercase tracking-wide",children:"Total Assignments"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mt-8",children:[(0,r.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-xl p-6 border border-white/30",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-white",children:e5.filter(e=>e.is_fully_completed).length}),(0,r.jsx)("div",{className:"text-indigo-200 text-sm font-medium",children:"Completed"})]})]})}),(0,r.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-xl p-6 border border-white/30",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-white",children:e5.filter(e=>e.completed_items>0&&!e.is_fully_completed).length}),(0,r.jsx)("div",{className:"text-indigo-200 text-sm font-medium",children:"In Progress"})]})]})}),(0,r.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-xl p-6 border border-white/30",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-white",children:e5.filter(e=>0===e.completed_items).length}),(0,r.jsx)("div",{className:"text-indigo-200 text-sm font-medium",children:"Not Started"})]})]})}),(0,r.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-xl p-6 border border-white/30",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-white",children:[e5.length>0?Math.round(e5.reduce((e,s)=>e+s.completion_percentage,0)/e5.length):0,"%"]}),(0,r.jsx)("div",{className:"text-indigo-200 text-sm font-medium",children:"Average"})]})]})})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Date"}),(0,r.jsx)("input",{type:"date",value:e7,onChange:e=>e9(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm"})]}),(0,r.jsx)("div",{className:"pt-6",children:e7===new Date().toISOString().split("T")[0]?(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),"Live Updates"]}):(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:"Historical Data"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 font-medium",children:[new Set(e5.map(e=>e.user_id)).size," employees tracked"]}),(0,r.jsxs)("button",{onClick:sM,disabled:e8,className:"flex items-center space-x-2 px-6 py-3 rounded-lg font-semibold transition-all ".concat(e8?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md hover:shadow-lg"),children:[(0,r.jsx)("svg",{className:"w-4 h-4 ".concat(e8?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,r.jsx)("span",{children:e8?"Refreshing...":"Refresh Data"})]}),e7!==new Date().toISOString().split("T")[0]&&(0,r.jsx)("button",{onClick:()=>e9(new Date().toISOString().split("T")[0]),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium shadow-md",children:"View Today"})]})]})}),eV?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("button",{onClick:()=>{eO(null),eU([])},className:"flex items-center space-x-2 text-indigo-600 hover:text-indigo-700 font-medium transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{children:"Back to Branches"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:eV.branch_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[eV.branch_code," • ",eV.city]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:new Set(eT.map(e=>e.user_id)).size}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Staff Members"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:eT.filter(e=>e.is_fully_completed).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:eT.filter(e=>e.completed_items>0&&!e.is_fully_completed).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[eT.length>0?Math.round(eT.reduce((e,s)=>e+s.completion_percentage,0)/eT.length):0,"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Average"})]})]})]}),0===eT.length?(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No Staff Progress Data"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"No checklist assignments found for staff in this branch."})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:Object.entries(eT.reduce((e,s)=>{let t=s.user_id;return e[t]||(e[t]={user:s.user,checklists:[]}),e[t].checklists.push(s),e},{})).sort((e,s)=>{var t,r,a,l;let[,n]=e,[,i]=s,o=n.checklists.reduce((e,s)=>e+s.completion_percentage,0)/n.checklists.length,d=i.checklists.reduce((e,s)=>e+s.completion_percentage,0)/i.checklists.length;return d!==o?d-o:"".concat(null===(t=n.user)||void 0===t?void 0:t.first_name," ").concat(null===(r=n.user)||void 0===r?void 0:r.last_name).localeCompare("".concat(null===(a=i.user)||void 0===a?void 0:a.first_name," ").concat(null===(l=i.user)||void 0===l?void 0:l.last_name))}).map(e=>{let[s,t]=e,a=t.checklists.filter(e=>e.is_fully_completed).length,l=t.checklists.length,n=t.checklists.reduce((e,s)=>e+s.completion_percentage,0)/l;return(0,r.jsx)(S,{userData:t,completedCount:a,totalCount:l,avgCompletion:n,folders:$},s)})})]}):0===eg.length?(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No Branches Found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Create pharmacy branches to monitor staff progress."}),(0,r.jsxs)("button",{onClick:()=>Y("branches"),className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium shadow-md",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create First Branch"]})]}):(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select a Branch to Monitor"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:eg.map(e=>{let s=e5.filter(s=>{var t,r;return null===(r=s.user)||void 0===r?void 0:null===(t=r.branch_assignments)||void 0===t?void 0:t.some(s=>s.branch_id===e.id)}).map(e=>e.user_id),t=e5.filter(e=>s.includes(e.user_id)),a=new Set(t.map(e=>e.user_id)).size,l=t.filter(e=>e.is_fully_completed).length,n=t.length,i=n>0?t.reduce((e,s)=>e+s.completion_percentage,0)/n:0;return(0,r.jsxs)("div",{onClick:()=>sL(e),className:"border-2 border-gray-200 rounded-xl p-6 cursor-pointer hover:border-indigo-300 hover:shadow-lg transition-all duration-200 bg-gradient-to-br from-white to-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-gray-900 text-lg",children:e.branch_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.branch_code," • ",e.city]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-indigo-600",children:[Math.round(i),"%"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Avg Completion"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:a}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Staff"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[l,"/",n]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Completed"})]})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,r.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:e.branch_type})})]},e.id)})})]})})]}),"payslips"===G&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-8 text-white",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Payslip Management"}),(0,r.jsx)("p",{className:"text-green-100 text-lg",children:"View and manage employee payslips by branch and month"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:ss.reduce((e,s)=>e+s.employees.length,0)}),(0,r.jsx)("div",{className:"text-green-200 text-sm",children:"Total Employees"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Month"}),(0,r.jsx)("input",{type:"month",value:si,onChange:e=>so(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),sd?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),(0,r.jsx)("span",{className:"ml-4 text-gray-600",children:"Loading payslip data..."})]}):(0,r.jsx)("div",{className:"space-y-6",children:ss.filter(e=>e.employees.length>0).map((e,s)=>(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.branch.branch_name||e.branch.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.employees.length," employees"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Branch"})]})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Hours"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Pay"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.employees.map((e,s)=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-sm",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name||"Unknown"," ",e.last_name||"User"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.email||"No email"})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.position||"Staff"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[e.totalHours,"h"]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm font-semibold text-green-600",children:["\xa3",e.totalPay.toFixed(2)]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("button",{onClick:()=>{sa(e),sn(!0)},className:"inline-flex items-center px-3 py-1 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors text-sm font-medium",children:[(0,r.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]})})]},s))})]})})]},s))})]}),"branches"===G&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Branch Management"}),(0,r.jsx)("p",{className:"text-orange-100 text-lg",children:"Manage multiple pharmacy branches, locations, and staff assignments"})]}),(0,r.jsx)("div",{className:"absolute right-8 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("div",{className:"w-40 h-40 bg-white bg-opacity-10 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-20 h-20 text-white opacity-50",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Pharmacy Branches"}),(0,r.jsxs)("button",{onClick:()=>ej(!0),className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center space-x-2 transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Add New Branch"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===eg.length?(0,r.jsxs)("div",{className:"text-center py-8 col-span-full",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Branches Found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first pharmacy branch to get started"}),(0,r.jsx)("button",{onClick:()=>ej(!0),className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Create First Branch"})]}):eg.map(e=>{var s,t,a;return(0,r.jsx)(h,{branch:e,onManageStaff:()=>{eb(e),eC(!0)},onViewDetails:()=>{eb(e),eD(!0)},onTimeManagement:()=>{eQ(e),eq(!0)},onSetLocation:()=>{eb(e),eZ(!0)},activeStaffCount:(null===(s=eG[e.id])||void 0===s?void 0:s.active)||0,onBreakCount:(null===(t=eG[e.id])||void 0===t?void 0:t.onBreak)||0,totalStaffCount:(null===(a=eG[e.id])||void 0===a?void 0:a.total)||0},e.id)})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Branch Performance Overview"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Checklist completion rates and SOP compliance by branch"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Performance Data"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Performance metrics will appear here once branches are created and staff assigned"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>ej(!0),className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-4 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,r.jsx)("span",{children:"Add New Branch"})]}),(0,r.jsxs)("button",{onClick:()=>Y("sop"),className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-6 py-4 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,r.jsx)("span",{children:"Manage SOPs"})]}),(0,r.jsxs)("button",{onClick:()=>Y("monitoring"),className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-6 py-4 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("span",{children:"View Reports"})]})]})]}),eR&&eI&&(0,r.jsx)(u,{branch:eI,staff:eL,onClose:()=>{eq(!1),eQ(null),sC(eI.id)}})]}),"sop"===G&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Standard Operating Procedures"}),(0,r.jsx)("p",{className:"text-green-100 text-lg",children:"Create and manage pharmacy SOPs and compliance documentation"})]}),(0,r.jsx)("div",{className:"absolute right-8 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("div",{className:"w-40 h-40 bg-white bg-opacity-10 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-20 h-20 text-white opacity-50",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 7.172V5L8 4z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Medication Handling"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"0 procedures"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Procedures for safe medication dispensing, storage, and inventory management."}),(0,r.jsx)("button",{className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"View Procedures"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Safety & Compliance"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"0 procedures"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Safety protocols, regulatory compliance, and emergency procedures."}),(0,r.jsx)("button",{className:"w-full bg-green-50 hover:bg-green-100 text-green-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"View Procedures"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Customer Service"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"0 procedures"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Customer interaction protocols, consultation procedures, and service standards."}),(0,r.jsx)("button",{className:"w-full bg-purple-50 hover:bg-purple-100 text-purple-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"View Procedures"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quality Control"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"0 procedures"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Quality assurance, validation processes, and accuracy verification procedures."}),(0,r.jsx)("button",{className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"View Procedures"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Operational Procedures"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"0 procedures"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Daily operations, opening/closing procedures, and system maintenance."}),(0,r.jsx)("button",{className:"w-full bg-yellow-50 hover:bg-yellow-100 text-yellow-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"View Procedures"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Emergency Procedures"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"0 procedures"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Emergency response protocols, incident reporting, and crisis management."}),(0,r.jsx)("button",{className:"w-full bg-red-50 hover:bg-red-100 text-red-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"View Procedures"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("button",{className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-6 py-4 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Create New SOP"})]}),(0,r.jsxs)("button",{className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-6 py-4 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,r.jsx)("span",{children:"Import SOPs"})]}),(0,r.jsxs)("button",{className:"flex items-center justify-center space-x-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-4 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("span",{children:"Generate Report"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Standard Operating Procedures"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your pharmacy's SOPs and compliance documentation"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No SOPs Created Yet"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Start building your pharmacy's standard operating procedures to ensure consistent operations"}),(0,r.jsx)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Create First SOP"})]})})]})]}),"holidays"===G&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(b,{})}),"settings"===G&&(0,r.jsxs)("div",{className:"text-center py-20",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsxs)("svg",{className:"w-8 h-8 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"System Settings"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Coming soon - Configure system settings and preferences"})]})]})})]}),R&&(0,r.jsx)(y,{onClose:()=>q(!1),onUserCreated:sm}),X&&K&&(0,r.jsx)(j,{user:K,onClose:()=>{J(!1),Z(null)},onUserUpdated:sv}),ed&&(0,r.jsx)(v,{onClose:()=>ec(!1),onFolderCreated:sh}),ex&&(0,r.jsx)(N,{selectedFolder:er,onClose:()=>em(!1),onChecklistCreated:()=>{su(null==er?void 0:er.id),sh()}}),eh&&el&&(0,r.jsx)(w,{checklist:el,items:ei,onClose:()=>eu(!1),onItemsUpdated:()=>sg(el.id)}),e$&&eX&&(0,r.jsx)(k,{folder:eX,onClose:()=>{e0(!1),eJ(null)},onFolderUpdated:sh}),e4&&e2&&(0,r.jsx)(_,{checklist:e2,onClose:()=>{e6(!1),e1(null)},onChecklistUpdated:()=>{er&&su(er.id)}}),ey&&(0,r.jsx)(C,{onClose:()=>ej(!1),onBranchCreated:()=>{sk(),ej(!1)}}),ev&&ew&&(0,r.jsx)(L,{branch:ew,onClose:()=>{eN(!1),ek(null)},onBranchUpdated:()=>{sk(),eN(!1),ek(null)}}),e_&&ef&&(0,r.jsx)(f,{branchId:ef.id,onClose:()=>{eC(!1),eb(null)},onStaffChanged:()=>{sk(),sC(ef.id),eA&&eW&&s_(eW.id)}}),eA&&eW&&(0,r.jsx)(M,{branch:eW,staff:eL,loadingStaff:eS,onClose:()=>{eD(!1),eH(null),eM([])},onAssignStaff:()=>{eb(eW),eC(!0)}}),eK&&ef&&(0,r.jsx)(m,{branch:ef,onClose:()=>{eZ(!1),eb(null)},onSave:sz}),sl&&sr&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Payslip Details - ",sr.first_name," ",sr.last_name]}),(0,r.jsx)("button",{onClick:()=>{sn(!1),sa(null)},className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Month: ",new Date(si).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Hours"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[sr.totalHours,"h"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Hourly Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["\xa3",(sr.pay_rate||12).toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Pay"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\xa3",sr.totalPay.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Working Days"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(D=sr.timeEntries)||void 0===D?void 0:D.length)||0})]})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clock In"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clock Out"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hours"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Holiday"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pay Rate"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===(W=sr.timeEntries)||void 0===W?void 0:W.map((e,s)=>{var t;let a=e.clock_in_time?new Date(e.clock_in_time):null,l=e.clock_out_time?new Date(e.clock_out_time):null,n=void 0!==e.scheduledHours?e.scheduledHours:a&&l?Math.round((l.getTime()-a.getTime())/36e5*100)/100:0,i=sr.pay_rate||12,o=n*i;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a?a.toLocaleDateString():"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.autoClockOut&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Auto"})]}):"Not clocked out"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:[n,"h"]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.holidayInfo?(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ".concat("working_holiday"===e.holidayInfo.type?"bg-orange-100 text-orange-800":"paid_holiday"===e.holidayInfo.type?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.holidayInfo.name}),e.holidayInfo.payMultiplier&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[e.holidayInfo.payMultiplier,"x pay"]})]}):(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"Regular day"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:["\xa3",i.toFixed(2),"/hr",(null===(t=e.holidayInfo)||void 0===t?void 0:t.payMultiplier)&&(0,r.jsxs)("span",{className:"ml-1 text-orange-600",children:["(",e.holidayInfo.payMultiplier,"x)"]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["\xa3",o.toFixed(2)]})]},s)})})]})}),(0,r.jsx)("div",{className:"flex justify-end mt-6",children:(0,r.jsx)("button",{onClick:()=>{sn(!1),sa(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Close"})})]})})]})]})}},9008:function(e,s,t){e.exports=t(3867)}},function(e){e.O(0,[602,891,888,774,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);